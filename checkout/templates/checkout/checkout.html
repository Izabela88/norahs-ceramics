{% extends 'base.html' %}
{% load static %}
{% load my_filters %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'checkout/css/style.css' %}">
{% endblock %}

{% block content %}
<!-- https://codepen.io/mha-el-sayed/pen/zLmoMX -->
<section class="checkout-section">
  <div class='container'>
    <div class='window'>
      <!-- order summary -->
      <div class='order-info'>
        <div class='order-info-content'>
          <h3>Order Summary</h3>
          <div class='line'></div>
          <div class='order-table'>
            {% for checkout_product in checkout_products %}
              <div class="order-box">
                <div class="checkout-product-image">
                  {% if checkout_product.product.image %}                   
                    <img src="{{ checkout_product.product.image.url }}"  class='order-img' alt="">                  
                  {% else %}                 
                    <img src="{% static 'images/no-pictures.png' %}"  class='order-img' alt="">
                  {%  endif %}
                </div>
                <div class="product-desc">
                  <p>{{checkout_product.product.name}}</p>
                  <p class="checkout-product-price">£{{checkout_product.product.price_pence | currency}}</p>
                </div>
                <p>qty: {{checkout_product.qty}}</p>
                <p class="price">£{{checkout_product.total_product_price | currency}}</p>
              </div>
            {% endfor %}         
          </div>
          <div class='line'></div>
          <div class='total'> 
            <div class='total-part vat'>
              <p>VAT 20%</p>
              <p>£{{vat_amount | currency}}</p>
            </div>
            <div class='total-part delivery'>
              <p>Delivery</p> 
              <p>£0.00</p> 
            </div>
            <div class='total-part total-price'>
              <p>Total</p>
              <p>£{{total_checkout_price | currency}}</p> 
            </div>
          </div>
          <div class='line'></div>
          <a class="bck-link" href="{% url 'basket' %}">&#x2190; back to basket</a>
        </div>
      </div>

      <div class="form_wrapper">
        <form action="{% url 'checkout_session' %}" method="post">
          {% csrf_token %}
          <fieldset class="msf_hide">
            <h3>personal information</h3>
            <div class="form-inputs">
              <label class="profile-label">First Name</label>
              {{pers_info_form.p_first_name}}
              <label class="profile-label">Last Name</label>
              {{pers_info_form.p_last_name}}
              <label class="profile-label">Phone number</label>
              {{pers_info_form.p_phone_number}}
              <label class="profile-label">Email</label>
              {{pers_info_form.p_email}}
            </div>
              <input class="button button-dark " type="button" name="back" value="Back"  onclick="msf_btn_back()">
              <input class="button button-dark " type="button" name="next" value="Next"  onclick="msf_btn_next()">
            <div class="msf_bullet_o"></div>
            <div class="msf_line"></div>
          </fieldset>
          <fieldset class="msf_hide">
            <h3>billing address</h3>
            <div class="form-inputs">
              <label class="profile-label">address line 1</label>
              {{billing_address_form.address_1}}
              
              <label class="profile-label">address line 2</label>
              {{billing_address_form.address_2}}

              <label class="profile-label">post code</label>
              {{billing_address_form.postcode}}

              <label class="profile-label">town/city</label>
              {{billing_address_form.town}}

              <label class="profile-label">county</label>
              {{billing_address_form.county}}

              <label class="profile-label">country</label>
              {{billing_address_form.country}}
            </div>
            <input class="button button-dark" type="button" name="back" value="Back"  onclick="msf_btn_back()">
            <input class="button button-dark" type="button" name="next" value="Next"  onclick="msf_btn_next()">
            <div class="msf_bullet_o"></div>
            <div class="msf_line"></div>
          </fieldset>         
          <fieldset class="msf_hide">
            <h3>shipping address</h3>
            <div class="form-inputs">
              <label class="profile-label">address line 1</label>
              {{shipment_address_form.s_address_1}}             
              <label class="profile-label">address line 2</label>
              {{shipment_address_form.s_address_2}}
              <label class="profile-label">post code</label>
              {{shipment_address_form.s_postcode}}
              <label class="profile-label">town/city</label>
              {{shipment_address_form.s_town}}
              <label class="profile-label">county</label>
              {{shipment_address_form.s_county}}
              <label class="profile-label">country</label>
              {{shipment_address_form.s_country}}          
              <div class="check-input">
                <label for="myCheck">Same as billing Address:</label>
                <input type="checkbox" id="myCheck" onclick="sameAddressess()">
              </div>
            </div>
            <input class="button button-dark " type="button" name="back" value="Back"  onclick="msf_btn_back()">
            <input class="button button-dark " type="button" name="next" value="Next"  onclick="msf_btn_next()">
            <input id="submitBtn" class="button button-dark checkout-form-btn" type="submit" value="go to secure payment" />
            <div class="msf_bullet_o"></div>
            <div class="msf_line"></div>
          </fieldset>            
        </form>
        </div>
    </div>
  </div>
</section>


{% endblock %}

{% block extra_js %}
{{ block.super }}
  <script src="{% static 'checkout/js/checkout.js' %}"></script>
  
 
{% endblock %}